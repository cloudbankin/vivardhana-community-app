<div class="content-container" ng-controller="ClientController">
    <ul class="breadcrumb">
        <li class="active">{{'label.anchor.clients' | translate}}</li>
    </ul>
    <api-validate></api-validate>

    <div class="card">
        <div class="toolbar">
            <h4>List of Clients</h4>
        </div>
        <div class="content">
            <br>

            <div class="row">
                <div class="col-sm-10">
                    <form ng-submit="search()" class="form-horizontal">
                        <div class="form-group">
                            <div class="col-md-4">
                                <input ng-autofocus="true" ng-model="filterText" ng-keyup="onFilter()" type="text"
                                       class="form-control unstyled"
                                       placeholder="{{'label.input.filterbynameaccno' | translate}}">
                            </div>
                            <div class="col-md-6">
                                <div class="input-group">
                                    <input data-ng-model="searchText" type="text"
                                           placeholder="{{'label.input.searchByNameAccNo' | translate}}"
                                           class="form-control unstyled"/>
                                    <span class="input-group-btn">
                                        <button class="btn btn-primary form-control">
                                            <span class="fa fa-search"></span>
                                        </button>
                                       <!--  <button type="button" ng-click="isCollapsed = !isCollapsed"
                                                        class="btn control btn-default">
                                                        <i class="fa fa-chevron-down"></i>
                                        </button> -->
                                        <button type="button" ng-click="advancesearchButton()"
                                                        class="btn control btn-default searchButton">
                                                        <i class="fa fa-chevron-down"></i>
                                        </button>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </form>

<!-- Testing -->

                <div uib-collapse="isCollapsed" class="blockoverlay" style="overflow: hidden;">

                       
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <input type="text" placeholder="Client name"
                                               ng-model="name" class="form-control"/>
                                    </div>
                                </div>
                                <div class="col-md-4">    
                                    <div class="form-group">
                                        <input type="text" placeholder="Mobile number"
                                               ng-model="mobileNo" class="form-control"/>
                                    </div>
                                </div>    
                            </div>
                            
                            <div class="row">    
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <select  id="officeid" ng-model="adOfficeId"  class="form-control"
                                        ng-options="office.id as office.name for office in offices"
                                        ng-change="changeOffice(adOfficeId)">
                                             <option value="">Select a office</option>
                                        </select>
                                    </div>    
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <select id="status" ng-model="status" class="form-control"
                                        ng-options="status.id as status.name for status in Status">
                                             <option value="">Select a client status</option>
                                        </select>
                                    </div>
                                </div>
                            </div>    
                                
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <select id="loanOfficer" ng-model="loanOfficer" class="form-control"
                                        ng-options="staff.id as staff.displayName for staff in staffs">
                                             <option value="">Select a loan officer</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <select id="loanPurpose" ng-model="loanPurpose"  class="form-control"
                                        ng-options="loanPurpose.id as loanPurpose.name for loanPurpose in loanPurposes">
                                             <option value="">Select a loan purpose</option>
                                        </select>
                                    </div>    
                                </div>
                            </div>
                            
                            <div class="row">    
                                <div class="col-md-6">
                                    <div class="form-group"> 
                                        <select id="loanProduct" ng-model="loanProduct" class="form-control"
                                        ng-options="loanProductsOption.id as loanProductsOption.name for loanProductsOption in loanProductsOptions">
                                             <option value="">Select a loan product</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <select id="funds" ng-model="fund"  class="form-control"
                                        ng-options="fund.id as fund.name for fund in funds">
                                             <option value="">Select a fund</option>
                                        </select>
                                    </div>    
                                </div>
                            </div>    
                                
                            <span><a ng-click="advancesearch(1)" class="btn btn-primary"><i class="icon-search icon-white"></i>{{'label.button.advancesearch'
                                | translate}}</a>
                            </span>

                            <span>
                                <a ng-click="resetSearch()" class="btn btn-primary">Reset</a>
                            </span> 

                        
                </div>

            <!--    <p> The client api call place </p>

                <div  class="blockoverlay" style="overflow-y: scroll">
                                <div class="form-group">
                                    <input type="text" placeholder="Name"
                                           ng-model="formData.Name" class="form-control"/>
                                </div>
                                <div class="form-group">
                                    <input type="text" placeholder="Office Id"
                                           ng-model="formData.OfficeId" class="form-control"/>
                                </div>
                        <span><a ng-click="advancesearchclient()" class="btn btn-primary"><i class="icon-search icon-white"></i>{{'label.button.advancesearch'
                            | translate}}</a>
                            <br/><br/>
                        </span>
                </div> -->

<!-- Testing -->

                </div>
                <div class="col-sm-2">
                    <a href="#/createclient" class="btn btn-primary pull-right" has-permission='CREATE_CLIENT'><i
                            class="fa fa-plus"></i> {{'label.button.createclient' | translate}}</a>
                </div>
            </div>

           <!--  <hr/> style="overflow: hidden;background-color: #F0E68C;    border-radius: 13px; padding-left: 1%; padding-top: 1%;padding-bottom: 1%;"-->

            <div uib-collapse="isdisplayed" class="blockoverlay searchResultDisplay colorchangeforclient" >
                    
                <div class="row">
                    <div class="col-md-4">  
                                    
                    </div>
                    <div class="col-md-4">  
                           <span class="labelBold">You have searched for </span>            
                    </div>
                    <div class="col-md-4 "> 
                        <div class="form-group deleteSearchResult">              
                           <a ng-click="searchResultButton()" ><i class="fa fa-times "></i></a>  
                        </div>   
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-4">  
                        <div class="form-group">                
                           <span class="labelBold">Name : </span> {{DisplayName}} 
                        </div>                       
                    </div>
                    <div class="col-md-4">     
                        <div class="form-group">             
                           <span class="labelBold">Mobile Number : </span> {{DisplayMobileNo}} 
                        </div>                       
                    </div>
                    <div class="col-md-4">  
                        <div class="form-group">                
                           <span class="labelBold">Office Name : </span> {{DisplayOfficeName.name}} 
                        </div>                        
                    </div>
                </div>  

                <div class="row">
                    <div class="col-md-4">   
                        <div class="form-group">               
                           <span class="labelBold">Status : </span> {{DisplayStatus.name}} 
                        </div>                       
                    </div>
                    <div class="col-md-4">  
                        <div class="form-group">                
                           <span class="labelBold">Loan Officer : </span> {{DisplayloanOfficer.displayName}} 
                        </div>                       
                    </div>
                    <div class="col-md-4"> 
                        <div class="form-group">                 
                           <span class="labelBold">Loan Purpose : </span> {{DisplayLoanPurpose.name}}
                        </div>                         
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-4">  
                        <div class="form-group">                
                           <span class="labelBold">Loan Product : </span> {{DisplayLoanProduct.name}}
                        </div>                        
                    </div>
                    <div class="col-md-4">   
                        <div class="form-group">               
                           <span class="labelBold">Fund : </span> {{DisplayFund.name}} 
                        </div>                       
                    </div>
                    <!-- <div class="col-md-4">   
                        <div class="form-group">               
                          <a ng-click="searchResultButton()" ><i class="fa fa-times "></i></a>  
                        </div>                       
                    </div> -->
                </div>

                <div class="row">
                    <div class="col-md-4">  
                                    
                    </div>
                    <div class="col-md-4">  
                           <span class="labelBold">Total no of clients : </span> {{totalClients}}         
                    </div>
                </div>    

                
            </div>                


            <table class="table">
                <thead>
                <tr>
                    <th>{{'label.heading.name' | translate}}</th>
                    <th>{{'label.heading.groupname' | translate}}</th>
                    <th>{{'label.heading.clientno' | translate}}</th>
                    <th>{{'label.heading.externalid' | translate}}</th>
                    <th>{{'label.heading.status' | translate}}</th>
                    <th>{{'label.heading.office' | translate}}</th>
                    <th>{{'label.heading.staff' | translate}}</th>
                    <th>{{'label.heading.crifstatus' | translate}}</th>
                </tr>
                </thead>

                <!--  <tr dir-paginate="client in clients | orderBy:'displayName':reverse  | filter:filterText | itemsPerPage: clientsPerPage" class="pointer-main" 
                    total-items="totalClients"> Original Response-->

                <tbody>
                <tr dir-paginate="client in clients | filter:filterText | itemsPerPage: clientsPerPage" class="pointer-main" 
                    total-items="totalClients">
                    <td class="pointer" data-ng-click="routeTo(client.id)">{{client.displayName}}</td>
                    <td class="pointer" data-ng-click="routeTo(client.id)">{{client.groupName}}</td>
                    <td class="pointer" data-ng-click="routeTo(client.id)">{{client.accountNo}}</td>
                    <td class="pointer" data-ng-click="routeTo(client.id)">{{client.externalId}}</td>
                    <td class="pointer" data-ng-click="routeTo(client.id)">
                        <i class="fa fa-stop {{client.status.code | StatusLookup}}"></i>&nbsp;{{client.status.value}}
                        <small ng-if="client.subStatus.description">[{{client.subStatus.description}}]</small>
                    </td>
                    <td class="pointer" data-ng-click="routeTo(client.id)">{{client.officeName}}</td>
                    <td class="pointer" data-ng-click="routeTo(client.id)">{{client.staffName}}</td>
                    <td><i class="fa fa-stop {{client.highmarkStatus | StatusLookup}}"></i>&nbsp;
                        {{client.highmarkStatus}}
                    </td>
                </tr>
                </tbody>

            </table>
            <dir-pagination-controls align="center" boundary-links="true"
                                     template-url="bower_components/angular-utils-pagination/dirPagination.tpl.html" on-page-change="getResultsPage(newPageNumber)">
                                     </dir-pagination-controls>

        </div>
    </div>


</div>